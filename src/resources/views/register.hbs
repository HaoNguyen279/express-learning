
<main>
    <div class="wrapper">
    <form method="POST" action="/register/registerSuccess">
        <h2>Register</h2>
        <div class="input-field">
            <input type="text" name="username" required id="input-email">
            <label id="email-label">Enter your email</label>
        </div>

        <div class="input-field">
            <input type="password" name="password" id="password-first" required>
            <label id="password-first-label">Enter your password</label>
        </div>


        <div class="input-field">
            <input type="password" required id="password-second">
            <label id="password-second-label">Enter your password again</label>
        </div>

        <div class="forget">
            <label for="remember">
                <input type="checkbox" id="remember">   
                <p style="margin: 0px 0px 0px 10px;">Check to confirm you're not a robot</p>
            </label>
        </div>
        <button type="submit" id="register-button" >Register</button>
        <div class="register">
        </div>
    </form>
    </div>
</main>
<script>
    const email_regex = /[A-Za-z].+@[A-Za-z]+\.com$/

    const input_email = document.getElementById('input-email');
    const email_label = document.getElementById('email-label');
    const password_first = document.getElementById('password-first');
    const password_second = document.getElementById('password-second');
    const register_button = document.getElementById('register-button');
    const password_second_label = document.getElementById('password-second-label');

    if(password_first.value !== password_second.value){
        register_button.disabled = true;
    }
    else{
        register_button.disabled = false;
    }


    input_email.addEventListener('blur',validEmail);
    password_first.addEventListener('blur',validPassword);
    password_second.addEventListener('blur', validPassword);
    
    function validEmail(){
        if(!email_regex.test(input_email.value)){
            input_email.closest('.input-field').classList.add('input-field-error');
            email_label.style = 'color: red;'
            return false;
        }
        else{
            email_label.style = '';
            input_email.closest('.input-field').classList.remove('input-field-error');
            return true;
        }
    }
    function validPassword(){
        if(password_first.value !== password_second.value){
            password_second.closest('.input-field').classList.add('input-field-error');
            password_second_label.style = 'color: red;'
            return false;
        }
        else{
            password_second.closest('.input-field').classList.remove('input-field-error');
            password_second_label.style = '';
            return true;
        }
    }
</script>